<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:components="components.*" creationComplete="group1_creationCompleteHandler(event)"
		 width="798" height="490" xmlns:clients="components.clients.*" xmlns:homes="components.homes.*" xmlns:phones="components.phones.*">
	<s:layout>
		<s:BasicLayout/>
	</s:layout>
	
	<fx:Declarations>
		<mx:WipeRight id="myWR"/>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<s:XMLListCollection id="infodomicli" source="{tabDatosPersonales.xmlinfoclidomi}"/>
		<s:XMLListCollection id="infotelcli" source="{tabDatosPersonales.xmlinfotelcli}"/>
		
	</fx:Declarations>
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		@namespace components "components.*";
		@namespace clients "components.clients.*";
		@namespace homes "components.homes.*";
		@namespace phones "components.phones.*";
		
	
		
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			
			import spark.events.IndexChangeEvent;
			//-----------------------------------------------------------
			protected function btnClose_clickHandler(event:MouseEvent):void
			{
				this.removeAllElements();
			}
			//-----------------------------------------------------------	
			
			protected function btnGuardar_clickHandler(event:MouseEvent):void
			{
				Alert.show(getDatosCliente());
				
			}
			//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
			protected function getDatosCliente():String{
				
				var datosCliente:String=
					"<ClienteDomicilioTelefono>\n" +
					"<idusuario>0</idusuario>\n"+
						tabDatosPersonales.getDatosPersonalesXML()+"" +
						tabDomicilios.getDatosDomiciliosXML()+"" +
						tabTelefonos.getDatosTelefonos()+"" +											
					"</ClienteDomicilioTelefono>\n";
				return datosCliente;
			}
			//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
			
			protected function group1_creationCompleteHandler(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				
				tabDatosPersonales.txtdocumento.setFocus();
			}
			
			protected function tabBar_changeHandler(event:IndexChangeEvent):void
			{
				
				
				if(TabBar(event.target).selectedIndex==1){
					
					if(tabDatosPersonales.infoclient.length>0){
						tabDomicilios.cmbbarrios.selectedItemId=infodomicli[0].Barrio.idbarrio;
						tabDomicilios.cmbcalles.selectedItemId=infodomicli[0].Calle.idcalle;
						tabDomicilios.cmbLocalidades.selectedItemId=infodomicli[0].Localidad.idlocalidad;
						tabDomicilios.cmborientacion.selectedItemId=infodomicli[0].Orientacion.idorientacion;
						tabDomicilios.cmbprovincias.selectedItemId=infodomicli[0].Localidad.idprovincia;
						tabDomicilios.txtcodpostal.text=infodomicli[0].Localidad.codigopostal;
						tabDomicilios.txtarea.text=infodomicli[0].area;
						tabDomicilios.txtentrecalle.text=infodomicli[0].entrecalleycalle;
						tabDomicilios.txtmanzana.text=infodomicli[0].manzana;
						tabDomicilios.txtmonoblock.text=infodomicli[0].monoblock;
						tabDomicilios.txtnumdepto.text=infodomicli[0].numdepto;
						tabDomicilios.txtnumero.text=infodomicli[0].numero;
						tabDomicilios.txtobservaciones.text=infodomicli[0].observaciones;
						tabDomicilios.txtpiso.text=infodomicli[0].piso;
						tabDomicilios.txtsector.text=infodomicli[0].sector;
						
					
					}
				
				
				}
				if(TabBar(event.target).selectedIndex==1){
					if(infotelcli.length>0){
						tabTelefonos.adgTel.dataProvider=infotelcli;
					
					}
				
				}
				
			}
			
		]]>
	</fx:Script>
	<s:Button id="btnCloseClientComponent" x="778" y="4" width="16" height="19" icon="assets/icon_close.png" click="btnClose_clickHandler(event)"/>
	<mx:VBox id="box" width="756" 
					 verticalCenter="9"  horizontalCenter="-1" height="454">		
	
	<s:TabBar direction="ltr" id="tabBar" x="57" y="53" width="629" dataProvider="{ViewStack}" change="tabBar_changeHandler(event)"/>
	<mx:ViewStack id="ViewStack" x="278" y="23" width="749" height="395">
		<s:NavigatorContent id="cliente" width="100%" height="100%" label="Cliente">
			<clients:datosCliente id="tabDatosPersonales" x="104" y="32" width="513" height="369"/>
		</s:NavigatorContent>
		<s:NavigatorContent id="domicilio" width="100%" height="100%" label="Domicilio">
			<homes:Domicilios id="tabDomicilios" x="47" y="22" height="341"/>
		</s:NavigatorContent>
		<s:NavigatorContent id="telefono" width="100%" height="100%" label="Telefono">
			<phones:Telefonos id="tabTelefonos" x="56" y="20" width="595" height="365"/>
		</s:NavigatorContent>
	</mx:ViewStack>
		<s:Button id="btnGuardar" label="Guardar" click="btnGuardar_clickHandler(event)"/>
	</mx:VBox>
</s:Group>
